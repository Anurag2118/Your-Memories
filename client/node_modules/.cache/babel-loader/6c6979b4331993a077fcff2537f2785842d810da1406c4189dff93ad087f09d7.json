{"ast":null,"code":"var _jsxFileName = \"D:\\\\Your Memories\\\\client\\\\src\\\\pages\\\\auth.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\nimport { useNavigate } from \"react-router-dom\";\n\n// Material-UI Components\nimport { Box, Button, TextField, Typography, Paper } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\n// Reusable Form Component with MUI\nconst Form = ({\n  label,\n  username,\n  setUsername,\n  password,\n  setPassword,\n  onSubmit\n}) => {\n  return (\n    /*#__PURE__*/\n    // Box is a flexible container from MUI\n    _jsxDEV(Box, {\n      component: \"form\" // Renders as a <form> tag\n      ,\n      onSubmit: onSubmit,\n      sx: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: 2,\n        // Adds space between form elements\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h2\",\n        gutterBottom: true,\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Username\",\n        variant: \"outlined\",\n        required: true,\n        fullWidth: true,\n        value: username,\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Password\",\n        type: \"password\",\n        variant: \"outlined\",\n        required: true,\n        fullWidth: true,\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        size: \"large\",\n        fullWidth: true,\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n// Login Component (Logic is the same, UI is changed)\n_c = Form;\nconst Login = () => {\n  _s();\n  const [_, setCookies] = useCookies([\"access_token\"]);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate();\n  const onSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await axios.post(`${BACKEND_URL}/auth/login`, {\n        username,\n        password\n      });\n      if (response.data.token) {\n        setCookies(\"access_token\", response.data.token);\n        window.localStorage.setItem(\"userID\", response.data.userID);\n        navigate(\"/\");\n      }\n    } catch (err) {\n      setCookies(\"access_token\", \"\");\n      window.localStorage.removeItem(\"userID\");\n      alert(err.response.data.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    label: \"Login\",\n    username: username,\n    setUsername: setUsername,\n    password: password,\n    setPassword: setPassword,\n    onSubmit: onSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n// Register Component (Logic is the same, UI is changed)\n_s(Login, \"auTIHLwSTL6tNqjrxpOpK3FCJ2I=\", false, function () {\n  return [useCookies, useNavigate];\n});\n_c2 = Login;\nconst Register = () => {\n  _s2();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const onSubmit = async event => {\n    event.preventDefault();\n    try {\n      await axios.post(`${BACKEND_URL}/auth/register`, {\n        username,\n        password\n      });\n      alert(\"Registration Completed! Now you can log in.\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Registration failed. User may already exist.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    label: \"Register\",\n    username: username,\n    setUsername: setUsername,\n    password: password,\n    setPassword: setPassword,\n    onSubmit: onSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n\n// Main Auth Page Component\n_s2(Register, \"Lrw7JeD9zj6OUWhT/IH4OIvPKEk=\");\n_c3 = Register;\nexport const Auth = () => {\n  return (\n    /*#__PURE__*/\n    // This main Box centers everything\n    _jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        minHeight: \"calc(100vh - 64px)\" // Full viewport height minus navbar height\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 6,\n        sx: {\n          padding: 4,\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 4,\n          width: '100%',\n          maxWidth: \"400px\" // Limits the form width on larger screens\n        },\n        children: [/*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }, this)\n  );\n};\n_c4 = Auth;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Form\");\n$RefreshReg$(_c2, \"Login\");\n$RefreshReg$(_c3, \"Register\");\n$RefreshReg$(_c4, \"Auth\");","map":{"version":3,"names":["React","useState","axios","useCookies","useNavigate","Box","Button","TextField","Typography","Paper","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","Form","label","username","setUsername","password","setPassword","onSubmit","component","sx","display","flexDirection","gap","width","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","required","fullWidth","value","onChange","e","target","type","size","_c","Login","_s","_","setCookies","navigate","event","preventDefault","response","post","data","token","window","localStorage","setItem","userID","err","removeItem","alert","message","_c2","Register","_s2","_err$response","_err$response$data","console","error","_c3","Auth","justifyContent","alignItems","minHeight","elevation","padding","maxWidth","_c4","$RefreshReg$"],"sources":["D:/Your Memories/client/src/pages/auth.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n// Material-UI Components\r\nimport { Box, Button, TextField, Typography, Paper } from \"@mui/material\";\r\n\r\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\r\n\r\n// Reusable Form Component with MUI\r\nconst Form = ({\r\n  label,\r\n  username,\r\n  setUsername,\r\n  password,\r\n  setPassword,\r\n  onSubmit,\r\n}) => {\r\n  return (\r\n    // Box is a flexible container from MUI\r\n    <Box\r\n      component=\"form\" // Renders as a <form> tag\r\n      onSubmit={onSubmit}\r\n      sx={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: 2, // Adds space between form elements\r\n        width: \"100%\",\r\n      }}\r\n    >\r\n      <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n        {label}\r\n      </Typography>\r\n      <TextField\r\n        label=\"Username\"\r\n        variant=\"outlined\"\r\n        required\r\n        fullWidth\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n      />\r\n      <TextField\r\n        label=\"Password\"\r\n        type=\"password\"\r\n        variant=\"outlined\"\r\n        required\r\n        fullWidth\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      <Button type=\"submit\" variant=\"contained\" size=\"large\" fullWidth>\r\n        {label}\r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n\r\n// Login Component (Logic is the same, UI is changed)\r\nconst Login = () => {\r\n  const [_, setCookies] = useCookies([\"access_token\"]);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const response = await axios.post(`${BACKEND_URL}/auth/login`, {\r\n        username,\r\n        password,\r\n      });\r\n\r\n      if (response.data.token) {\r\n        setCookies(\"access_token\", response.data.token);\r\n        window.localStorage.setItem(\"userID\", response.data.userID);\r\n        navigate(\"/\");\r\n      }\r\n\r\n    } catch (err) {\r\n      setCookies(\"access_token\", \"\");\r\n      window.localStorage.removeItem(\"userID\");\r\n      alert(err.response.data.message);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <Form\r\n      label=\"Login\"\r\n      username={username}\r\n      setUsername={setUsername}\r\n      password={password}\r\n      setPassword={setPassword}\r\n      onSubmit={onSubmit}\r\n    />\r\n  );\r\n};\r\n\r\n// Register Component (Logic is the same, UI is changed)\r\nconst Register = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      await axios.post(`${BACKEND_URL}/auth/register`, {\r\n        username,\r\n        password,\r\n      });\r\n      alert(\"Registration Completed! Now you can log in.\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.response?.data?.message || \"Registration failed. User may already exist.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      label=\"Register\"\r\n      username={username}\r\n      setUsername={setUsername}\r\n      password={password}\r\n      setPassword={setPassword}\r\n      onSubmit={onSubmit}\r\n    />\r\n  );\r\n};\r\n\r\n// Main Auth Page Component\r\nexport const Auth = () => {\r\n  return (\r\n    // This main Box centers everything\r\n    <Box\r\n      sx={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        minHeight: \"calc(100vh - 64px)\", // Full viewport height minus navbar height\r\n      }}\r\n    >\r\n      {/* Paper gives the card-like appearance with a shadow */}\r\n      <Paper\r\n        elevation={6}\r\n        sx={{\r\n          padding: 4,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: 4,\r\n          width: '100%',\r\n          maxWidth: \"400px\", // Limits the form width on larger screens\r\n        }}\r\n      >\r\n        <Login />\r\n        <Register />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}